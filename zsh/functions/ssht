#!/bin/zsh

# Attaches tmux session immediately after ssh'ing into a remote
ssht() {
    ssh -t "$@" 'sh -c "
        sock=/tmp/ssock.`id -u`;
        rm \$sock 2>/dev/null;
        ln -s $SSH_AUTH_SOCK \$sock;
        export SSH_AUTH_SOCK=\$sock;
        command -v tmux >/dev/null && (exec tmux attach 2>/dev/null || exec tmux new)
    "'
}
